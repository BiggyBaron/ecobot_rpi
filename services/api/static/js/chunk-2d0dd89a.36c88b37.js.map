{"version":3,"sources":["webpack:///./src/views/DashboardHistory.vue?d226","webpack:///src/views/DashboardHistory.vue","webpack:///./src/views/DashboardHistory.vue?eb0e","webpack:///./src/views/DashboardHistory.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","id","on","$event","addCommentModal","addProblemModal","downloadArray","tableItems","tableFields","scopedSlots","_u","key","fn","ref","item","select","isSelect","city","district","street","typeofbuilding","buildingnum","entrancenum","shaftnum","floor","aptoroffice","valveID","status","$set","actionStatusChange","staticStyle","warningModal","$router","push","path","model","value","callback","$$v","commentary","expression","sendCommentary","slot","problem","sendProblem","staticRenderFns","name","components","MainChartExample","WidgetsDropdown","WidgetsBrand","data","warning","success","alert_message","action_switcher","$route","params","mounted","getResults","methods","axios","defaults","headers","common","method","url","qs","stringify","comment","ID","problem_log","component"],"mappings":"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","file":"static/js/chunk-2d0dd89a.36c88b37.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('CRow',{staticClass:\"clapans\"},[_c('CCol',{attrs:{\"md\":\"12\"}},[_c('CCard',[_c('CCardHeader',[_c('div',{staticClass:\"d-flex aligin-items-center justify-content-between\"},[_c('span',[_vm._v(\"История клапана: \"+_vm._s(_vm.id))]),_c('CButton',{staticClass:\"ml-3\",attrs:{\"color\":\"success\"},on:{\"click\":function($event){_vm.addCommentModal = !_vm.addCommentModal}}},[_vm._v(\" Добавить комметарий клапана \")]),_c('CButton',{staticClass:\"ml-3\",attrs:{\"color\":\"warning\"},on:{\"click\":function($event){_vm.addProblemModal = !_vm.addProblemModal}}},[_vm._v(\" Указать проблему клапана \")]),_c('CButton',{staticClass:\"mr-2\",attrs:{\"color\":\"success\"},on:{\"click\":_vm.downloadArray}},[_vm._v(\" Скачать историю клапана в csv \")])],1)]),_c('CCardBody',[_c('CDataTable',{staticClass:\"mb-0 table-outline\",attrs:{\"hover\":\"\",\"items\":_vm.tableItems,\"fields\":_vm.tableFields,\"head-color\":\"light\"},scopedSlots:_vm._u([{key:\"select\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_c('CInputCheckbox',{attrs:{\"value\":item.select,\"custom\":\"\",\"inline\":\"\"},on:{\"change\":function($event){_vm.isSelect = true}}})],1)}},{key:\"city\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.city)+\" \")])}},{key:\"district\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.district)+\" \")])}},{key:\"street\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.street)+\" \")])}},{key:\"building\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.typeofbuilding)+\" \")])}},{key:\"numHouse\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.buildingnum)+\" \")])}},{key:\"numDoor\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.entrancenum)+\" \")])}},{key:\"numMine\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.shaftnum)+\" \")])}},{key:\"stage\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.floor)+\" \")])}},{key:\"numOffice\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.aptoroffice)+\" \")])}},{key:\"id\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_vm._v(\" \"+_vm._s(item.valveID)+\" \")])}},{key:\"status\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[(item.status == 0)?_c('CBadge',{attrs:{\"color\":\"danger\"}},[_vm._v(\" выключен \")]):(item.status == 1)?_c('CBadge',{attrs:{\"color\":\"success\"}},[_vm._v(\"включен\")]):(item.status == 2)?_c('CBadge',{attrs:{\"color\":\"warning\"}},[_vm._v(\"нет данных\")]):_c('CBadge',{attrs:{\"color\":\"info\"}},[_vm._v(\"не известно\")]),_c('br'),_c('CSwitch',{staticClass:\"mt-1\",attrs:{\"color\":\"primary\",\"checked\":item.status == 1,\"value\":item.status},on:{\"update:checked\":[function($event){return _vm.$set(item, \"status == 1\", $event)},function($event){return _vm.actionStatusChange(item)}]}})],1)}},{key:\"settings\",fn:function(ref){\nvar item = ref.item;\nreturn _c('td',{},[_c('span',{staticClass:\"d-flex align-items-center\",staticStyle:{\"white-space\":\"nowrap\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.warningModal = !_vm.warningModal}}},[_c('CIcon',{staticClass:\"mr-1\",attrs:{\"name\":\"cilSettings\"}}),_vm._v(\" Настройки \")],1),_c('span',{staticClass:\"d-flex align-items-center\",staticStyle:{\"white-space\":\"nowrap\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.$router.push({ path: '/dashboard/' + item.id })}}},[_c('CIcon',{staticClass:\"mr-1\",attrs:{\"name\":\"cilSettings\"}}),_vm._v(\" История \")],1)])}}])})],1)],1)],1)],1),_c('CModal',{attrs:{\"title\":\"Добавление комментария\",\"ok-disabled\":true,\"show\":_vm.addCommentModal},on:{\"update:show\":function($event){_vm.addCommentModal=$event}}},[_c('h4',[_vm._v(\"Введите комметарий\")]),_c('div',{staticClass:\"mt-4\"},[_c('CTextarea',{attrs:{\"type\":\"text\",\"required\":\"\"},model:{value:(_vm.commentary),callback:function ($$v) {_vm.commentary=$$v},expression:\"commentary\"}})],1),_c('div',[_c('CButton',{staticClass:\"mr-3\",attrs:{\"disabled\":!_vm.commentary,\"color\":\"success\"},on:{\"click\":_vm.sendCommentary}},[_vm._v(\"Отправить\")])],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"})]),_c('CModal',{attrs:{\"title\":\"Добавление проблемы\",\"ok-disabled\":true,\"show\":_vm.addProblemModal},on:{\"update:show\":function($event){_vm.addProblemModal=$event}}},[_c('h4',[_vm._v(\"Сообщите о проблеме\")]),_c('div',{staticClass:\"mt-4\"},[_c('CTextarea',{attrs:{\"type\":\"text\",\"required\":\"\"},model:{value:(_vm.problem),callback:function ($$v) {_vm.problem=$$v},expression:\"problem\"}})],1),_c('div',[_c('CButton',{staticClass:\"mr-3\",attrs:{\"disabled\":!_vm.problem,\"color\":\"success\"},on:{\"click\":_vm.sendProblem}},[_vm._v(\"Отправить\")])],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <CRow class=\"clapans\">\r\n      <CCol md=\"12\">\r\n        <CCard>\r\n          <CCardHeader>\r\n            <div class=\"d-flex aligin-items-center justify-content-between\">\r\n              <span>История клапана: {{ id }}</span>\r\n              <CButton color=\"success\" class=\"ml-3\" @click=\"addCommentModal = !addCommentModal\" >\r\n                Добавить комметарий клапана\r\n              </CButton>\r\n              <CButton color=\"warning\" class=\"ml-3\" @click=\"addProblemModal = !addProblemModal\" >\r\n                Указать проблему клапана\r\n              </CButton>\r\n              <CButton color=\"success\" class=\"mr-2\" @click=\"downloadArray\" >\r\n                Скачать историю клапана в csv\r\n              </CButton>\r\n            </div>\r\n          </CCardHeader>\r\n          <CCardBody>\r\n            <CDataTable\r\n              class=\"mb-0 table-outline\"\r\n              hover\r\n              :items=\"tableItems\"\r\n              :fields=\"tableFields\"\r\n              head-color=\"light\"\r\n            >\r\n              <td slot=\"select\" slot-scope=\"{ item }\">\r\n                <CInputCheckbox\r\n                  :value=\"item.select\"\r\n                  custom\r\n                  inline\r\n                  @change=\"isSelect = true\"\r\n                />\r\n              </td>\r\n              <td slot=\"city\" slot-scope=\"{ item }\">\r\n                {{ item.city }}\r\n              </td>\r\n              <td slot=\"district\" slot-scope=\"{ item }\">\r\n                {{ item.district }}\r\n              </td>\r\n              <td slot=\"street\" slot-scope=\"{ item }\">\r\n                {{ item.street }}\r\n              </td>\r\n              <td slot=\"building\" slot-scope=\"{ item }\">\r\n                {{ item.typeofbuilding }}\r\n              </td>\r\n              <td slot=\"numHouse\" slot-scope=\"{ item }\">\r\n                {{ item.buildingnum }}\r\n              </td>\r\n              <td slot=\"numDoor\" slot-scope=\"{ item }\">\r\n                {{ item.entrancenum }}\r\n              </td>\r\n              <td slot=\"numMine\" slot-scope=\"{ item }\">\r\n                {{ item.shaftnum }}\r\n              </td>\r\n              <td slot=\"stage\" slot-scope=\"{ item }\">\r\n                {{ item.floor }}\r\n              </td>\r\n              <td slot=\"numOffice\" slot-scope=\"{ item }\">\r\n                {{ item.aptoroffice }}\r\n              </td>\r\n              <td slot=\"id\" slot-scope=\"{ item }\">\r\n                {{ item.valveID }}\r\n              </td>\r\n              <td slot=\"status\" slot-scope=\"{ item }\">\r\n                <CBadge v-if=\"item.status == 0\" color=\"danger\">\r\n                  выключен\r\n                </CBadge>\r\n                <CBadge v-else-if=\"item.status == 1\" color=\"success\"\r\n                  >включен</CBadge\r\n                >\r\n                <CBadge v-else-if=\"item.status == 2\" color=\"warning\"\r\n                  >нет данных</CBadge\r\n                >\r\n                <CBadge v-else color=\"info\">не известно</CBadge>\r\n                <br />\r\n                <CSwitch\r\n                  class=\"mt-1\"\r\n                  color=\"primary\"\r\n                  :checked.sync=\"item.status == 1\"\r\n                  :value=\"item.status\"\r\n                  @update:checked=\"actionStatusChange(item)\"\r\n                />\r\n              </td>\r\n              <td slot=\"settings\" slot-scope=\"{ item }\">\r\n                <span\r\n                  style=\"white-space: nowrap; cursor: pointer\"\r\n                  class=\"d-flex align-items-center\"\r\n                  @click=\"warningModal = !warningModal\"\r\n                  ><CIcon name=\"cilSettings\" class=\"mr-1\" /> Настройки\r\n                </span>\r\n                <span\r\n                  style=\"white-space: nowrap; cursor: pointer\"\r\n                  class=\"d-flex align-items-center\"\r\n                  @click=\"$router.push({ path: '/dashboard/' + item.id })\"\r\n                  ><CIcon name=\"cilSettings\" class=\"mr-1\" /> История\r\n                </span>\r\n              </td>\r\n            </CDataTable>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n    <CModal\r\n      title=\"Добавление комментария\"\r\n      :ok-disabled=\"true\"\r\n      :show.sync=\"addCommentModal\"\r\n    >\r\n      <h4>Введите комметарий</h4>\r\n      <div class=\"mt-4\">\r\n        <CTextarea type=\"text\" v-model=\"commentary\"  required/>\r\n      </div>\r\n      <div>\r\n        <CButton :disabled=\"!commentary\" color=\"success\" class=\"mr-3\" @click=\"sendCommentary\"\r\n          >Отправить</CButton\r\n        >\r\n      </div>\r\n      <div slot=\"footer\"></div>\r\n    </CModal>\r\n    <CModal\r\n      title=\"Добавление проблемы\"\r\n      :ok-disabled=\"true\"\r\n      :show.sync=\"addProblemModal\"\r\n    >\r\n      <h4>Сообщите о проблеме</h4>\r\n      <div class=\"mt-4\">\r\n        <CTextarea type=\"text\" v-model=\"problem\" required />\r\n      </div>\r\n      <div>\r\n        <CButton :disabled=\"!problem\" color=\"success\" class=\"mr-3\" @click=\"sendProblem\"\r\n          >Отправить</CButton\r\n        >\r\n      </div>\r\n      <div slot=\"footer\"></div>\r\n    </CModal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MainChartExample from \"./charts/MainChartExample\";\r\nimport WidgetsDropdown from \"./widgets/WidgetsDropdown\";\r\nimport WidgetsBrand from \"./widgets/WidgetsBrand\";\r\nimport downloadCsv from \"download-csv\";\r\n\r\nconst qs = require(\"qs\");\r\nconst axios = require(\"axios\");\r\nexport default {\r\n  name: \"Dashboard\",\r\n  components: {\r\n    MainChartExample,\r\n    WidgetsDropdown,\r\n    WidgetsBrand,\r\n  },\r\n  data() {\r\n    return {\r\n      addProblemModal:false,\r\n      problem:'',\r\n      addCommentModal:false,\r\n      commentary:'',\r\n      warning: false,\r\n      success: false,\r\n      alert_message: \"\",\r\n      warningModal: false,\r\n      isSelect: false,\r\n      action_switcher: \"\",\r\n      id: this.$route.params.id,\r\n      tableItems: [],\r\n      tableFields: [\r\n        { key: \"valveID\", label: \"ID\" },\r\n        { key: \"comment\", label: \"Комметарий\" },\r\n        { key: \"date\", label: \"Дата\" },\r\n      ],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getResults();\r\n  },\r\n  methods: {\r\n    getResults() {\r\n      let app = this;\r\n      axios.defaults.headers.common[\"Authorization\"] =\r\n        \"Bearer \" + window.auth.token;\r\n      axios\r\n        .get(\"/getvalvecommentsbyID/\" + app.$route.params.id)\r\n        .then((response) => {\r\n          app.tableItems = response.data;\r\n          for (var i = 0; i < app.tableItems.length; i++) {\r\n            app.tableItems[i].select = false;\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          if (error.response.status == 401) {\r\n            window.auth.logout();\r\n          }\r\n        });\r\n    },\r\n    downloadArray() {\r\n      const datas = this.tableItems;\r\n      const current = new Date();\r\n      const date = `${current.getDate()}-${\r\n        current.getMonth() + 1\r\n      }-${current.getFullYear()}`;\r\n      let name = \"История клапана № \" + this.id + \"_\" + date + \".csv\";\r\n      downloadCsv(datas, this.tableFields, name);\r\n    },\r\n    sendCommentary() {\r\n      axios.defaults.headers.common[\"Authorization\"] =\r\n        \"Bearer \" + window.auth.token;\r\n      axios({\r\n        method: \"post\",\r\n        url: \"/addvalvecomment/\",\r\n        data: qs.stringify({\r\n          comment:this.commentary,\r\n          ID:this.$route.params.id\r\n        }),\r\n      })\r\n        .then(() => {\r\n          this.addCommentModal = false;\r\n          this.commentary = '';\r\n          this.getResults();\r\n          app.warningModal = false;\r\n          app.success = true;\r\n          app.alert_message = \"Успешно добавлено\";\r\n          app.setting = {};\r\n          setTimeout(function () {\r\n            app.success = false;\r\n          }, 3000);\r\n        })\r\n        .catch(function (error) {\r\n          app.warning = true;\r\n          app.alert_message = error.response.data.detail;\r\n          setTimeout(function () {\r\n            app.warning = false;\r\n          }, 3000);\r\n        });\r\n    },\r\n    sendProblem() {\r\n      axios.defaults.headers.common[\"Authorization\"] =\r\n        \"Bearer \" + window.auth.token;\r\n      axios({\r\n        method: \"post\",\r\n        url: \"/sensorproblem/\",\r\n        data: qs.stringify({\r\n          problem_log:this.problem,\r\n          valveID :this.$route.params.id\r\n        }),\r\n      })\r\n        .then(() => {\r\n          this.addProblemModal = false;\r\n          this.problem = '';\r\n          this.getResults();\r\n          app.warningModal = false;\r\n          app.success = true;\r\n          app.alert_message = \"Успешно добавлено\";\r\n          app.setting = {};\r\n          setTimeout(function () {\r\n            app.success = false;\r\n          }, 3000);\r\n        })\r\n        .catch(function (error) {\r\n          app.warning = true;\r\n          app.alert_message = error.response.data.detail;\r\n          setTimeout(function () {\r\n            app.warning = false;\r\n          }, 3000);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardHistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardHistory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DashboardHistory.vue?vue&type=template&id=7726482c&\"\nimport script from \"./DashboardHistory.vue?vue&type=script&lang=js&\"\nexport * from \"./DashboardHistory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}